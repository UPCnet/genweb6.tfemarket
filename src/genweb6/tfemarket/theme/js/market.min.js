function setCookie(e,n,a){var o=new Date;o.setTime(o.getTime()+24*a*60*60*1e3),document.cookie=e+"="+n+";path=/;expires="+o.toUTCString()}function updateURLParameter(e,n,a){var o="",e=(l=e.split("?"))[0],t=l[1],c="";if(t)for(var l=t.split("&"),i=0;i<l.length;i++)l[i].split("=")[0]!=n&&(o+=c+l[i],c="&");return e+"?"+o+(c+""+n+"="+a)}function changeLangAndReload(e){setCookie("MERCAT_TFE_LANG",e);e=(new Date).getTime();-1<window.location.href.indexOf("?")?-1==window.location.href.indexOf("searchOffer")&&-1<(-1<window.location.href.indexOf("&search")||window.location.href.indexOf("?search"))?$("#formSearchOffers").submit():-1<window.location.href.indexOf("&ts")||-1<window.location.href.indexOf("?ts")?window.location=updateURLParameter(window.location.href,"ts",e):window.location=window.location.href+"&ts="+e:window.location=window.location.href+"?ts="+e}function uncollapseAll(){$("#collapseAll.collapsed").click(function(){$("#accordionOfertes .accordion-button.collapsed").trigger("click").removeClass("collapsed").attr("aria-expanded","true"),$(this).removeClass("collapsed").attr("aria-expanded","true"),collapseAll()})}function collapseAll(){$("#collapseAll:not(.collapsed)").click(function(){$("#accordionOfertes .accordion-button:not(.collapsed)").trigger("click").addClass("collapsed").attr("aria-expanded","false"),$(this).addClass("collapsed").attr("aria-expanded","false"),uncollapseAll()})}$.urlParam=function(e){e=new RegExp("[?&]"+e+"=([^&#]*)").exec(window.location.href);return!!e&&e[1]},$(function(){$(".buscador-mercat .btn").on("click",function(){$(".spinner-mercat").fadeIn(500)}),$(".setLangCA").click(function(){changeLangAndReload("ca")}),$(".setLangEN").click(function(){changeLangAndReload("en")}),$(".setLangES").click(function(){changeLangAndReload("es")}),$('input[name="language"]').click(function(){0==$('input[name="language"]:checked').length&&$(this).prop("checked",!0)}),1==$("#formSearchOffers").attr("data-saved")&&$('input[name="language"]').prop("checked",!0);var e=$.urlParam("offer");e&&0<$("#heading-"+e).length&&($(".alert[role='alert']:not(.alert-mercat)").appendTo("#"+e+"-info"),$("html, body").animate({scrollTop:$("#heading-"+e).offset().top-100},1e3),$.urlParam("open")&&setTimeout(function(){$("#heading-"+e+" .accordion-button").trigger("click")},500)),uncollapseAll()});